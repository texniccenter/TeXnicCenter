%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% $Id$
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% This file and the files in this directory and its subdirectories
% are intended to test several parts of the TeXnicCenter-system.
%
% Copyright (C) 2002-$CurrentYear$ ToolsCenter

% Their main purpose is to reproduce several bugs or behaviours coming
% up from missing features. They are neither a good starting point for
% working with TeX nor with the TeXnicCenter-system. If you use them,
% you do this on your own risk. They come WITHOUT ANY WARRANTY;
% without even the implied warranty of MERCHANTABILITY or
% FITNESS FOR A PARTICULAR PURPOSE.
%
% Anything below the "end of prolog"-line is for testing purposes only
% and does not reflect the opinions of the author(s) and is not meant
% to be a statement at all; it is even not said to be true or reliable.
%
% If you have further questions or if you want to support
% further TeXnicCenter development, visit the TeXnicCenter-homepage
%
%     http://www.ToolsCenter.org
%
% end of prolog %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% HEADER
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass[a4paper,twoside,10pt]{report}

\begin{document}


A good place to start testing regular expressions
is the website \verb|https://regex101.com|.
Use ECMAScript-syntax for testing,
since the structure parser uses this version.


% TXCUserCommand: InputFileTeXParse
% Name: myinput
% Description: augmenting the input command with some extras
% \\myinput\s*\{\s*\"?([^\}]*)\"?\s*\}
% Filename: 1
% 
\NewDocumentCommand{\myinput}{m}{\input{#1}}
\NewDocumentCommand{\MyInput}{m}{\input{#1}}

%This should then be detected by the structure parser
\myinput{section}%comment after command

%This should NOT YET be detected by the structure parser
\MyInput{nosection}%comment after command


% TXCUserCommand: InputFileTeXParse
% Name: MyInput
% Description: augmenting the input command with some extras
% \\MyInput\s*\{\s*\"?([^\}]*)\"?\s*\}
% Filename: 1

%Now it should be detected!
\MyInput{section}


% TXCUserCommand: Heading           			   												
% Name: mysection
% Description: TXC 2.0-style parsing of headers
%\\mysection\s*\*?\s*([\[\{].*\})
% Title: 1
% Level: section
\NewDocumentCommand{\mysection}{m}{\section{#1}}

\mysection[TXC 2.0-type parsing does not see this.]
{An invisible section}

% TXCUserCommand: Heading           			   												
% Name: mysubsection
% Description: TXC 3.0-style parsing of headers
%\\mysubsection\s*\*?\s*([\[\{].*[\]\}])
% Title: 1
% Level: subsection
\NewDocumentCommand{\mysubsection}{m}{\subsection{#1}}

%This should then be detected by the structure parser
\mysection{A visible section}
\mysubsection [  and a subsection   ] {This is not taken into account.}
\mysubsection * [TXC 3.0-type parsing sees this.]
{This is not even captured by the structure parser.}
\mysubsection{and two further ones}\mysubsection{right behind each other}

%This should NOT be detected by the structure parser
\MySection{A LaTeX error and the structure parser should not see it}


% TXCUserCommand: Heading           			   												
% Name: simple greedy chapter
% Description: Users may capture just the argument without the curly braces
%\\simplegreedychapter\{(.*)\}
% Title: 1
% Level: chapter
\NewDocumentCommand{\simplegreedychapter}{m}{\chapter{#1}}

\simplegreedychapter{Simple Greedy Chapter}\simplegreedychapter{Simple Greedy Chapter}

% TXCUserCommand: Heading           			   												
% Name: simple thrifty chapter
% Description: Users may capture just the argument without the curly braces
%\\simplethriftychapter\{(.*?)\}
% Title: 1
% Level: chapter
\NewDocumentCommand{\simplethriftychapter}{m}{\chapter{#1}}

\simplethriftychapter{Simple thrifty Chapter}\simplethriftychapter{Simple thrifty Chapter}

%Now all together
\simplethriftychapter{An}\mysection{entire}\section{table}\subsection{of}\subsubsection{contents}\subsection{in}\mysection{a}\mysubsection{single}\section{line}



%%%%%%%%%%%%%%% Some error cases %%%%%%%%%%%%%%%

%% Unknown Type
% TXCUserCommand: Unknown

%% Too few arguments
% TXCUserCommand: InputFileTeXParse
% Name: myinput
% Description: augmenting the input command with some extras
% \\myinput\s*\{\s*\"?([^\}]*)\"?\s*\}

%% Space in first column: will not be recognized
 % TXCUserCommand: InputFileTeXParse
% Name: myinput
% Description: augmenting the input command with some extras
% \\myinput\s*\{\s*\"?([^\}]*)\"?\s*\}
% Filename: 1

%% Regular expression has an error
% TXCUserCommand: InputFileTeXParse
% Name: myinput
% Description: augmenting the input command with some extras
% \\myinput\s*\{\s*\"?([^\}]*)\"?\s*\}[
% Filename: 1

%% Trying to use a non-existing capture group
% TXCUserCommand: InputFileTeXParse
% Name: myinput
% Description: augmenting the input command with some extras
% \\myinput\s*\{\s*\"?([^\}]*)\"?\s*\}
% Filename: -1

%% Trying to use a non-existing capture group
% TXCUserCommand: InputFileTeXParse
% Name: myinput
% Description: augmenting the input command with some extras
% \\myinput\s*\{\s*\"?([^\}]*)\"?\s*\}
% Filename: 2


\end{document}

